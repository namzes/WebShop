@page "/product/{id:int}"
@using Webshop.Shared.Models
@using WebShop.Client.Components.Features
@rendermode InteractiveServer
@inject IHttpClientFactory HttpClientFactory

<PageTitle>@CurrentProduct?.Name</PageTitle>
<ProductSingle CurrentProduct="CurrentProduct"></ProductSingle>

@code {
	[Parameter] public int Id { get; set; }

	private Product? CurrentProduct { get; set; }

	protected override async Task OnInitializedAsync()
	{
		var client = HttpClientFactory.CreateClient("MinimalApi");
		CurrentProduct = await client.GetFromJsonAsync<Product>($"/Products/{Id}");
	}
}
